{{> navbar}}

<div class="w-full flex justify-between items-center">
    <p class="text-3xl font-bold">
        Users
    </p>
    <a href="/users/create" class="bg-blue-500 text-white px-2 py-1 rounded">
        Add User
    </a>
</div>
<table class="table-auto border-collapse border border-gray-300 w-full mt-4">
    <thead>
    <tr class="bg-gray-200">
        <th class="border border-gray-300 px-4 py-2">ID</th>
        <th class="border border-gray-300 px-4 py-2">Name</th>
        <th class="border border-gray-300 px-4 py-2">Phone</th>
        <th class="border border-gray-300 px-4 py-2">Action</th>
    </tr>
    </thead>
    <tbody>
    {{!-- Example rows, replace with your dynamic data --}}
    {{#each users}}
    <tr>
        <td class="border border-gray-300 px-4 py-2">{{this.id}}</td>
        <td class="border border-gray-300 px-4 py-2">{{this.name}}</td>
        <td class="border border-gray-300 px-4 py-2">{{this.phone}}</td>
        <td class="border border-gray-300 px-4 py-2">
            <button onclick="handleEdit({{this.id}})" class="bg-blue-500 text-white px-2 py-1 rounded mr-2">Edit</button>
            <button onclick="handleDelete({{this.id}})" class="bg-red-500 text-white px-2 py-1 rounded">Delete</button>
        </td>
    </tr>
    {{/each}}

    </tbody>
</table>

<script>
    function handleEdit(id) {
        window.location.href = `/users/edit/${id}`;
    }

    function handleDelete(id) {
        if (confirm("Are you sure you want to delete this user?")) {
            const form = document.createElement('form');
            form.method = 'POST';
            form.action = `/users/delete/${id}?_method=DELETE`
            form.style.display = 'none'

            // append the form to the doc body;
            document.body.appendChild(form);
            form.submit();
        }
    }
</script>